#!/usr/bin/env ruby

begin
  require 'lolcommits'
rescue LoadError
  require 'rubygems'
  require 'lolcommits'
end

require 'lolcommits/cli/commands/lolcommits'

# DEPRECATION HACK -- MANUALLY CHECK FOR AND MODIFY
if ARGV[0] == '--capture'
  STDERR.puts "DEPRECATION WARNING: `lolcommits --capture` syntax is deprecated.\n" \
              "See `lolcommits capture --help` or disable & re-enable your hooks.\n\n"
  ARGV[0] = 'capture'
end

Lolcommits::CLI::LolcommitsCommand.run

#   #
#   # change working dir to either a repo or the fs root
#   #
#   def self.change_dir_to_root_or_repo!
#     debug 'Walking up dir tree'
#     loop do
#       cur = File.expand_path('.')
#       nxt = File.expand_path('..', cur)
#       if nxt == cur
#         warn 'Repository root not found'
#         return
#       end
#       return if VCSInfo.repo_root?
#       Dir.chdir(nxt)
#     end
#   end
